# deploy.yml reference implementation

# By changing the license_accepted boolean value to "true" you are
# declaring your agreement to the terms of the license agreement
# contained in the license.txt file included with this software
# distribution.
licensing:
  license_accepted: true

# Deployment facts reference
facts:

  # Node IP or resolvable hostname from which installations will be launched
  # The only supported configuration is to install from the same node as the
  # bootstrap.sh script is run.
  # NOTE: if the install node is to be migrated into an island environment,
  #       the hostname or IP address listed here should be the one in the
  #       island environment.
  install_node: 192.168.2.200

  # IPs of machines that will be whitelisted in the firewall and allowed
  # to access management ports of all nodes.  If this is set to the
  # wildcard (0.0.0.0/0) then anyone can access management ports.
  management_clients:
    - 0.0.0.0/0

  # Full Docker path to ecs-software image to be deployed.
  # WARNING: If you have customized your image in release.conf, make sure this
  # line matches your custom value or you'll have a troubleshooting headache!
  ecs_software_image: cache.local:5000/emccorp/ecs-software-3.0.0:latest

  # Picklist for node names.
  # Currently "moons" (default) and "cities" (ECS SKU-flavored) are available
  autonaming: moons

  # Credentials ansible will use to configure ssh public key authentication and baseline sudo
  ansible_defaults:
    ansible_user: 'admin'
    ansible_ssh_pass: 'ChangeMe'
    ansible_become_pass: 'ChangeMe'
    ansible_password: 'ChangeMe'

  # Environment configuration for this deployment.
  # Unless you have a custom ECS for which the default credentials have been changed,
  # ecs_root_user and ecs_root_pass must be set to "root" and "ChangeMe" respectively.
  # All block devices that will be consumed by ECS must be listed under ecs_block_devices.
  # At least ONE (1) block device is REQUIRED for a successful install.  More is better.
  node_defaults:
    ecs_root_user: root
    ecs_root_pass: ChangeMe
    dns_domain: local
    dns_servers:
      - 192.168.2.2
    ntp_servers:
      - 192.168.2.2

  # Storage pool defaults. Configure to your liking.
  storage_pool_defaults:
    is_cold_storage_enabled: false
    is_protected: false
    description: Default storage pool description
    ecs_block_devices:
      - /dev/vda

  # Storage pool layout.  You MUST have at least ONE (1) storage pool for a successful install.
  storage_pools:
    - name: sp1
      members:
        - 192.168.2.220
        - 192.168.2.221
      options:
        description: My First SP
        ecs_block_devices:
          - /dev/vda
    - name: sp2
      members:
        - 192.168.2.222
      options:
        protected: false
        cold_storage_enabled: false
        description: My Second SP

  # VDC defaults.  Configure to your liking.
  virtual_data_center_defaults:
    description: Default virtual data center description
    secret_key: c7koRP3oXNKYkhxKRqsP

  # Virtual data center layout.  You MUST have at least ONE (1) VDC for a successful install.
  virtual_data_centers:
    - name: vdc1
      members:
        - sp1
      options:
        secret_key: c7koRP3oXNKYkhxKRqsP
        description: My First VDC
    - name: vdc2
      members:
        - sp2
      options:
        secret_key: c7koRP3oXNKYkhxKRqsQ
        description: My Second VDC

  # Replication group defaults.  Configure to your liking.
  replication_group_defaults:
    description: Default replication group description
    enable_rebalancing: false
    allow_all_namespaces: false
    is_full_rep: false

  # Replication group layout.  You MUST have at least ONE (1) RG for a successful install.
  replication_groups:
    - name: rg1
      members:
        - vdc1
      options:
        description: My First RG
    - name: rg2
      members:
        - vdc2
      options:
        description: My Second RG
    - name: rg3
      members:
        - vdc1
        - vdc2
      options:
        description: My Third RG is a geo-replicated RG

  # Namespace defaults.
  namespace_defaults:
    is_stale_allowed: false
    is_compliance_enabled: false
    is_encryption_enabled: false
    namespace_admins: root

  # Namespace layout (optional)
  namespaces:
    - name: ns1
      members:
        - rg1
      options:
        description: My First Namespace
